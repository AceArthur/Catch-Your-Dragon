<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>CatchYourDragon_LoginPage</title>

<script  src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<script type="text/javascript">
	$(document).ready(function(){
		animateDiv();
		$("#glass").on("click", function(event){
			draw(event.pageX, event.pageY);
		})
		
	});
	
	function makeNewPosition(){
    
    // Get viewport dimensions (remove the dimension of the div)
    var h = $(window).height() - 50;
    var w = $(window).width() - 50;
    
    var nh = Math.floor(Math.random() * h);
    var nw = Math.floor(Math.random() * w);
    
    return [nh,nw];    
    
}

function animateDiv(){
    var newq = makeNewPosition();
    var oldq = $('#dragon').offset();
    var speed = calcSpeed([oldq.top, oldq.left], newq);
    
    $('#dragon').animate({ top: newq[0], left: newq[1] }, speed,
     function(){
      animateDiv();        
    });
    
};

function calcSpeed(prev, next) {
    
    var x = Math.abs(prev[1] - next[1]);
    var y = Math.abs(prev[0] - next[0]);
    
    var greatest = x > y ? x : y;
    
    var speedModifier = 0.1;

    var speed = Math.ceil(greatest/speedModifier);

    return speed;

};
	function draw(top, left){
		var num = Math.floor(4);
		var canvas = document.getElementById('canvas');
		if (canvas.getContext) {
		var ctx = canvas.getContext('2d');
		};
		
		alert(num);
		ctx.lineWidth = 5;
		ctx.strokeStyle="#FD0";
		ctx.beginPath();
		ctx.arc(top,left,5,0,2*Math.PI,true);
		ctx.fill();
		
		for (var j = num; j >= 0; j--) {
			ctx.beginPath();
		        ctx.moveTo(top, left);
		
		        top2 = top - Math.floor((1 - j*0.5)*80);
		        left2 = left + Math.floor((1 - j*0.5)*80);
		
		        ctx.lineTo(top2 + Math.floor((Math.random()-j*0.5)*20), left2 + Math.floor((Math.random()-j*0.3)*20));
		        ctx.lineTo(top2,left2);
		        ctx.stroke();
		};
		for (var i = num; i >= 0; i--){
			ctx.beginPath();
			ctx.moveTo(top,left);
			
			top1 = top + Math.floor((1-i*0.5)*80);
			left1 = left + Math.floor((1-i*0.5)*80);
			
			ctx.lineTo(top1 + Math.floor((Math.random()-i*0.5)*20), left1 + Math.floor((Math.random()-i*0.3)*20));
			ctx.lineTo(top1,left1);
			ctx.stroke();
		}
		
		
		
	};
 </script>
<link href="css/style.css" rel="stylesheet" type="text/css">
<link href="css/box_style.css" rel="stylesheet" type="text/css">
</head>

<body style="background-image:url(images/bg.png)">

	
	<div id="glass"><img style="width: 100%; height: 100%;" src="images/glass1.png"> </div>		
	
	<div id="dragon" style="position:fixed; background-color:red; width:50px; height:50px; z-index: -10;">
		<img src="images/dragon.png">
	</div>
	<div id="cvs_div" style="position:fixed; width:1000px; height:100vh; top:0px; left: 0px; z-index: -5;">
	<canvas id="canvas" width="1000", height="1000"></canvas>
	</div>
</body>
</html>
